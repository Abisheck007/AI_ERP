<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tasks</title>
    <link rel="stylesheet" href="../styles/Tasks.css">
    
</head>

<body>
    <div class="dashboard"></div>
    <div class="top-bar">
        <div class="leftside">
            <input type="text" name="" class="search" placeholder="Search...">
            <button class="quick-create"
                style="width: 30px;height: 30px;margin-top: 20px;margin-left: 10px;border: none;background-color: white;"><img
                    src="../images/plus.png" alt="" class="in-btn">
                <div class="msg0">Quick Create</div>
            </button>
        </div>

        <div class="rightside">
            <button class="rs-btns share-docs">
                <img src="../images/share.png" alt="" class="rs-img">
                <div class="msg2">Share documents ideas..</div>
            </button>
            <button class="rs-btns todo-para"><img src="../images/correct-gray.png" alt="" class="rs-img1">
                <div class="msg3">Todo items</div>
            </button>

            <button class="rs-btns user-wrapper js-click" id="userBtn">
                <div class="user-border">
                    <img src="../images/user.png" alt="" class="rs-img2">
                    <div class="msg1">ERP Demo1 Admin</div>
                </div>
            </button>

            <button class="rs-btns timesheet"
                style="margin-left:40px;border: 1px solid rgb(212, 208, 208);height: 29px;border-radius: 6px;"><img
                    src="../images/clock.png" alt="" class="rs-img3">
                <div class="msg4">My Timesheets</div>
            </button>
            <button class="rs-btns notify-data"
                style="border: 1px solid rgb(212, 208, 208);height: 29px;border-radius: 6px;"><img
                    src="../images/notification.png" alt="" class="rs-img4">
                <div class="msg5">Notifications</div>
            </button>

            <div class="dropdown" id="dropdownMenu">
                <button><a href="profile-page.html" class="drop-class">My Profile</a></button>
                <button><a href="edit-profile-data.html" class="drop-class">Edit Profile</a></button>
                <button><a href="login.html" class="drop-class">Logout</a></button>
            </div>
        </div>

    </div>
    <div><img src="../images/arrow.png" class="arrow-img"></div>
    <div class="add-task">
        <div class="ctr.btns">
            <button class="ctr-btn" onclick="openModal()">New Task </button>


        </div>

        <div class="overlay" id="overlay" onclick="closeModal()"></div>

        <div class="modal" id="modal">

            <div class="modal-header">
                <h2 style="font-size: medium; color: gray;">Add new task</h2>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div class="line0">&nbsp;</div>
            <div class="form-container">
                <div style="font-size: small;margin-bottom: 10px;color: rgb(59, 59, 59);"><span
                        class="redclr">*</span>Subject</div>
                <input name="Subject" type="text" required id="Subject" />
                <div style="font-size: small;margin-bottom: 10px;color: rgb(63, 62, 62);">Hourly Rate</div>
                <input name="Hourly_rate" type="number" placeholder="0" id="Hourly_rate" />



                <div class="two-sheets">
                    <div>
                        <div style="font-size: small;margin-bottom: 6px;color: rgb(63, 62, 62);"><span
                                class="redclr">*</span>Start Date</div>
                        <input name="Start_Date" type="date" placeholder="start date" style="width: 200px;color: gray;"
                            id="Start_Date" />
                    </div>
                    <div>
                        <div style="font-size: small;margin-bottom: 6px;color: rgb(63, 62, 62);">Due Date</div>
                        <input name="Due_date" type="date" style="width: 200px;color: gray;" id="Due_date">
                    </div>
                </div>


                <div style="font-size: small;margin-bottom: 6px;color: rgb(19, 18, 18);">Priority</div>
                <select name="Priority" style="width: 250px;color: rgb(5, 5, 5);font-size: small;" id="Priority">
                    <option style="color: rgb(5, 5, 5);">Medium</option>
                    <option>Low</option>
                    <option>High</option>
                    <option>Urgent</option>
                </select>
                <div style="font-size: small;margin-bottom: 6px;color: rgb(63, 62, 62);">Repeat every</div>
                <select name="Repeat_every" style="color: gray;width: 250px;font-size: small;" id="Repeat_every">
                    <option  disabled selected>Nothing Selected</option>
                    <option >Week</option>
                    <option >2 Weeks</option>
                    <option >1 Month</option>
                    <option>2 Months</option>
                    <option>3 Months</option>
                    <option>1 year</option>

                </select>
                <div style="font-size: small;margin-bottom: 6px;color: rgb(63, 62, 62);">Related to</div>
                <select name="Related_to" style="color: gray;width: 250px;font-size: small;" id="Related_to">
                    <option  disabled selected>Nothing Selected</option>
                    <option >Project</option>
                    <option >Invoice</option>
                    <option >Customer</option>
                    <option >Estimate</option>
                    <option >Contract</option>
                    <option >Ticket</option>

                </select>

                <div class="two-sheets1 ">
                    <div>
                        <div style="font-size: small;margin-bottom: 6px;color: rgb(63, 62, 62);">Assignees</div>
                        <select name="Assignees" style="width: 230px;color: gray;font-size: small;" id="Assignees">
                            <option  disabled selected>Nothing Selected</option>
                            <option >ERP Demo1 Admin</option>
                        </select>
                    </div>
                    <div>
                        <div style="font-size: small;margin-bottom: 6px;color: rgb(63, 62, 62);margin-left: 20px;">
                            Followers</div>
                        <select name="Followers" style="color: gray;font-size: small;width: 230px;" id="Followers">
                            <option value="" disabled selected>Nothing Selected</option>
                        </select>
                    </div>
                </div>

                <div style="font-size: small;margin-bottom: 6px;color: rgb(63, 62, 62);">Task Description</div>
                <textarea rows="4" placeholder="Add Description" style="font-size: small;height: 100px;"
                    name="Task_Description" id="Task_Description"></textarea>
                <div class="line1">&nbsp;</div>
                <div class="action-btns">
                    <button type="button" class="cancel" onclick="closeModal()">Cancel</button>
                    <button class="save" onclick="submitData()">Save</button>
                </div>
            </div>
        </div>


        <div style="margin-right: 30px; position: relative;">

            <button onclick="blockdata()" style="border: none;cursor: pointer;"><img src="../images/filter.png"
                    class="filter-img"></button>
        </div>

    </div>


    <div class="task-filters" style="display: flex;flex-direction: column;font-size: small;">


        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; align-items:first baseline; border-radius: 4px; cursor: pointer;">All</button>
        <hr style="margin: 10px 0; color: rgb(255, 255, 255);">

        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Not
            Started</button>
        <button class="btn"
            style=" margin: 4px; background:#fff; border: none;; border-radius: 4px; cursor: pointer;">In
            Progress</button>
        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Testing</button>
        <button class="btn"
            style="margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Awaiting
            Feedback</button>
        <button class="btn"
            style="margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Complete</button>

        <hr style="margin: 10px 0;">

        <button class="btn"
            style=" margin: 4px; background:#fff;border: none; border-radius: 4px; cursor: pointer;">Today's
            tasks</button>
        <button class="btn" style="margin: 4px; background:#fff;border: none; border-radius: 4px; cursor: pointer;">Due
            Date
            Passed</button>
        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Upcoming
            Tasks</button>

        <hr style="margin: 10px 0;">

        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Tasks assigned
            to me</button>
        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Tasks I'm
            following</button>
        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Not
            Assigned</button>

        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Recurring</button>

        <hr style="margin: 10px 0;">

        <button class="btn"
            style=" margin: 4px; background:#fff;border: none; border-radius: 4px; cursor: pointer;">Billable</button>
        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Billed</button>
        <button class="btn"
            style=" margin: 4px; background:#fff; border: none; border-radius: 4px; cursor: pointer;">Not
            Billed</button>


    </div>







    <div class="task-para">Tasks Summary</div>
    <div class="task-summary">
        <div class="total-task">
            <div style="margin-bottom: 30px; margin-left: 30px;">
                <span style="margin-right: 10px;font-weight: bolder ; ;">0</span>
                <span style="color: gray;font-size: small;">Not Started</span>
            </div>
            <div
                style="width: 1px; height: 45px; background-color: rgb(134, 126, 126);margin-right: 10px;margin-bottom: 10px;">
            </div>

        </div>
        <div class="total-task">
            <div style="margin-bottom: 30px; margin-left: 10px;">
                <span style="margin-right: 10px;font-weight: bolder ; ;">0</span>
                <span style="color: rgb(19, 122, 129);font-size: small;">In Progress</span>
            </div>
            <div
                style="width: 1px; height: 45px; background-color: rgb(134, 126, 126);margin-right: 10px;margin-bottom: 10px;">
            </div>

        </div>
        <div class="total-task">
            <div style="margin-bottom: 30px; margin-left: 10px;">
                <span style="margin-right: 10px;font-weight: bolder ; ;">0</span>
                <span style="color: rgb(43, 91, 180);font-size: small;">Testing</span>
            </div>
            <div
                style="width: 1px; height: 45px; background-color: rgb(134, 126, 126);margin-right: 10px;margin-bottom: 10px;">
            </div>

        </div>
        <div class="total-task">
            <div style="margin-bottom: 30px; margin-left: 10px;">
                <span style="margin-right: 10px;font-weight: bolder ; ;">0</span>
                <span style="color: rgb(29, 214, 29);font-size: small;">Awaiting Feedback</span>
            </div>
            <div
                style="width: 1px; height: 45px; background-color: rgb(134, 126, 126);margin-right: 10px;margin-bottom: 10px;">
            </div>

        </div>
        <div class="total-task">
            <div style="margin-bottom: 30px; margin-left: 10px;">
                <span style="margin-right: 10px;font-weight: bolder ; ;">0</span>
                <span style="color: rgb(20, 173, 84);font-size: small;">Complete</span>
            </div>



        </div>

        <div><img src="../images/google-docs.png" class="docs-img"></div>
    </div>
    <div class="task-assigned">Tasks assigned to me:0</div>
    <div class="task-assigned1">Tasks assigned to me:0</div>
    <div class="task-assigned2">Tasks assigned to me:0</div>
    <div class="task-assigned3">Tasks assigned to me:0</div>
    <div class="task-assigned4">Tasks assigned to me:0</div>


    <div class="data-schedule">



        <div class="values">
            <div class="selecting-values">
                <div>
                    <select class="select-value">
                        <option value="10" class="fg">10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                        <option value="-1">All</option>
                    </select>
                </div>
                <div style="margin-left: 20px;">

                    <button class="bt1"
                        style="border-top-left-radius: 3px;border-bottom-left-radius: 3px;font-size: small;">Export</button><button
                        class="bt1">Bulk Actions</button><button class="bt1"
                        style="border-top-right-radius: 3px;border-bottom-right-radius: 3px; background-color: white;"><img
                            src="../images/reload.png" class="reload-img"></button><button class="bt1"
                        style="margin-left: 1170px;cursor: pointer;"><img src="../images/search.png"
                            class="search-img"></button><input type="text" placeholder="search.." id="" class="bt1"
                        style="width: 50px;">



                </div>
            </div>

          
            <table id="taskTable" border="1">
                <thead>
                  <tr>
                    <th>Subject</th>
                    <th>Hourly Rate</th>
                    <th>Start Date</th>
                    <th>Due Date</th>
                    <th>Priority</th>
                    <th>Repeat</th>
                    <th>Related To</th>
                    <th>Assignee</th>
                    <th>Followers</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody id="taskTableBody" style="text-align: center;">
                
                </tbody>
              </table>
         
           
    </div>
    <script>
        fetch("left-dash.html").then(response => response.text()).then(data => {
            document.querySelector('.dashboard').innerHTML = data;
        });
        const dropdown = document.getElementById('dropdownMenu');
        document.querySelector('.js-click').addEventListener('click', function (e) {
            e.preventDefault();
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block'
        });
        function openModal() {
            document.getElementById("modal").classList.add("active");
            document.getElementById("overlay").classList.add("active");
        };

        function closeModal() {
            document.getElementById("modal").classList.remove("active");
            document.getElementById("overlay").classList.remove("active");
        };

        function blockdata() {
            const data = document.querySelector('.task-filters');
            data.classList.add('.active');
        }
        function submitData() {
    const taskData = {
        subject: document.getElementById('Subject').value,
        hourlyRate: parseFloat(document.getElementById('Hourly_rate').value),
        startDate: document.getElementById('Start_Date').value,
        dueDate: document.getElementById('Due_date').value,
        priority: document.getElementById('Priority').value,
        repeatEvery: document.getElementById('Repeat_every').value,
        relatedTo: document.getElementById('Related_to').value,
        assignees: document.getElementById('Assignees').value,
        followers: document.getElementById('Followers').value,
        taskDescription: document.getElementById('Task_Description').value
    };

    fetch("http://localhost:8080/task", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(taskData)
    })
    .then(response => response.json())
    .then(data => {
        alert("Task saved successfully!");
        closeModal();
    })
    .catch(error => console.error("Error:", error));
}
async function loadTasks() {
  try {
    const response = await fetch('http://localhost:8080/task');
    const tasks = await response.json();

    const tableBody = document.getElementById('taskTableBody');
    tableBody.innerHTML = ''; 

   
    tasks.forEach(task => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${task.subject || '-'}</td>
            <td>${task.hourlyRate || '-'}</td>
            <td>${task.startDate || '-'}</td>
            <td>${task.dueDate || '-'}</td>
            <td>${task.priority || '-'}</td>
            <td>${task.repeatEvery || '-'}</td>
            <td>${task.relatedTo || '-'}</td>
            <td>${task.assignees || '-'}</td>
            <td>${task.followers || '-'}</td>
            <td>${task.taskDescription || '-'}</td>
          `;
          tableBody.appendChild(row);
        });

  } catch (error) {
    console.error('Error loading tasks:', error);
  }
}


window.onload = loadTasks;

    </script>


</body>

</html>